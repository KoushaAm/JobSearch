<!-- <link rel="stylesheet" href="results.css"> -->

<head>
  <%- include('../partials/head'); %>
</head>

<body class = "flex bg-dark">

  <header>
    <%- include('../partials/header'); %>
  </header>
  
  <main>
    <%- include('../partials/search'); %>


    <!-- <div class="box">
      <h4 style="color: aliceblue;">Search Results</h4>
      <div class="row" id="results-container"></div>
    </div> -->

    <div class="box">
      <div id = "row" class="row">
        
         <% job_results.forEach(function(job) { %> 
            <div class="col-md-4">
              <div class="card">
                <div class="card-body">
                  <h3 class="card-title"><%= job.title %></h3>
                  <p class="card-text"><%= job.company_name %></p>
                  <p class="card-text"><%= job.location %></p>
                </div>
              </div>
            </div>
              
          <% }) %>
        </div 
        
      </div> 
      
    </div>
    
    <!-- <div class="box">
      <h4 style = "color: aliceblue;">Search Results</h4>
        <div class="row" id="search-results"></div>
    </div> -->
  
  </main>

<footer>
  <%- include('../partials/footer'); %>
</footer>

<style>

  .box {
    margin-top: 20px;
    padding: 10px;
  }

  .row {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
  }

  .card:hover {
    box-shadow: 2px 2px 2px rgba(54, 52, 52, 0.941);
  }


  .card {
    width: 100%;
    margin-bottom: 20px;
    box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    background-color: rgb(31, 30, 30);
  }

  .card :hover {
      box-shadow: 5px 5px 5px rgba(227, 14, 14, 0.2);
  }

  .card-title {
    font-size: 18px;
    font-weight: bold;
    color: white;
  }

  .card-text {
    font-size: 14px;
    margin-top: 10px;
    color: white;
  }
    



  
</style>


  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>


  $(document).ready(function() {

    $.get('/search', function(data) {  // get the data from the server that was triggered by the form submit
      // Access the job results from the JSON data

      const job_results = data.job_results;
      // find the result container
      // var container = document.getElementById("results-container");


  //     job_results.forEach(function(job) {
  //       const jobHtml = `
  //       <div class="col-md-4">
  //             <div class="card mb-4">
  //               <div class="card-body">
  //                 <h2 class="card-title">${job.title}</h2>
  //                 <p class="card-text">${job.description}</p>
  //                 <p class="card-text">${job.location}</p>
  //               </div>
  //             </div>
  //           </div>
  //       `;
  //       container.append(jobHtml); // add the job HTML to the container
  //   });
  //   }, 'json');
  // });
    });
  });
    
  </script>
  